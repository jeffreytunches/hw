"undefined"==typeof bsn&&(_b=bsn={}),"undefined"==typeof _b.Autosuggest?_b.Autosuggest={}:alert("Autosuggest is already set!"),_b.AutoSuggest=function(t,e){if(!document.getElementById)return 0;if(this.fld=_b.DOM.gE(t),!this.fld)return 0;this.sInp="",this.nInpC=0,this.aSug=[],this.iHigh=0,this.KeyD=0,this.KeyP=0,this.oP=e?e:{};var i,s={minchars:1,meth:"get",varname:"input",className:"search-main",listID:"as_ul",spanID:"AS_ResultsHolder",divID:"autosuggest",timeout:2500,delay:500,offsety:-5,shownoresults:!0,noresults:"No results!",maxheight:250,cache:!0,maxentries:25};for(i in s)typeof this.oP[i]!=typeof s[i]&&(this.oP[i]=s[i]);"undefined"!=typeof divIDArray?divIDArray[divIDArray.length]=[this.oP.divID]:divIDArray=[this.oP.divID];{var n=this;this.fld.value}this.fld.onkeydown=function(t){return n.onKeyDown(t)},this.fld.onkeypress=function(t){return n.onKeyPress(t)},this.fld.onkeyup=function(t){return n.onKeyUp(t)},this.fld.onclick=function(t){return n.onClick(t)},this.fld.onfocus=function(){return n.onFocus()},document.body.onclick=function(){return n.onBlur()},this.fld.setAttribute("autocomplete","off")},_b.AutoSuggest.prototype.onKeyDown=function(t){var e=window.event?window.event.keyCode:t.keyCode,i=38,s=40,n=1;switch(this.KeyD=1,e){case i:this.changeHighlight(e),n=0;break;case s:this.changeHighlight(e),n=0}return n},_b.AutoSuggest.prototype.onKeyPress=function(t){if(1==this.KeyD&&1==this.KeyP){var e=window.event?window.event.keyCode:t.keyCode,i=38,s=40,n=1;switch(e){case i:this.changeHighlight(e),n=0;break;case s:this.changeHighlight(e),n=0}return n}this.KeyP=1},_b.AutoSuggest.prototype.onFocus=function(){this.getSuggestions(this.fld.value)},_b.AutoSuggest.prototype.onClick=function(t){if(!t)var t=window.event;t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},_b.AutoSuggest.prototype.onBlur=function(){var t=this;t.clearSuggestions()},_b.AutoSuggest.prototype.onKeyUp=function(t){var e=window.event?window.event.keyCode:t.keyCode;this.KeyD=0,this.KeyP=0;var i=13,s=27,n=38,o=40,r=1;switch(e){case n:break;case o:break;case i:return this.iHigh>0?(this.setHighlightedValue(),r=0,!1):!0;case s:this.clearSuggestions(),r=0;break;default:this.getSuggestions(this.fld.value)}return r},_b.AutoSuggest.prototype.getSuggestions=function(t){if(_b.DOM.remE(this.idAs),this.clearSuggestions(),this.sInp=t,t.length<this.oP.minchars)return this.aSug=[],this.nInpC=t.length,0;var e=this.nInpC;this.nInpC=t.length?t.length:0;var i=this.aSug.length;if(this.nInpC>e&&i&&i<this.oP.maxentries&&this.oP.cache){for(var s=[],n=0;i>n;n++){var o=this.aSug[n].value.toLowerCase();o.search(t.toLowerCase())>=0&&s.push(this.aSug[n])}return this.aSug=s,this.createList(this.aSug),!1}var r=this,h=this.sInp;return clearTimeout(this.ajID),this.ajID=setTimeout(function(){r.doAjaxRequest(h)},this.oP.delay),!1},_b.AutoSuggest.prototype.doAjaxRequest=function(t){if(t!=this.fld.value)return!1;var e=this;if("function"==typeof this.oP.script)var i=this.oP.script(encodeURIComponent(this.sInp));else var i=this.oP.script+this.oP.varname+"="+encodeURIComponent(this.sInp);if(!i)return!1;var s=this.oP.meth,t=this.sInp,n=function(i){e.setSuggestions(i,t)},o=function(t){0!=t&&alert("AJAX error: "+t)},r=new _b.Ajax;r.makeRequest(i,s,n,o)},_b.AutoSuggest.prototype.setSuggestions=function(req,input){if(input!=this.fld.value)return!1;if(this.aSug=[],this.oP.json)for(var jsondata=eval("("+req.responseText+")"),i=0;i<jsondata.results.length;i++)this.aSug.push({id:jsondata.results[i].id,value:jsondata.results[i].value,info:jsondata.results[i].info});else for(var xml=req.responseXML,results=xml.getElementsByTagName("results")[0].childNodes,i=0;i<results.length;i++)results[i].hasChildNodes()&&this.aSug.push({id:results[i].getAttribute("id"),value:results[i].childNodes[0].nodeValue,info:results[i].getAttribute("info")});this.idAs=this.oP.divID,this.createList(this.aSug)},_b.AutoSuggest.prototype.createList=function(t){var e=this;if(_b.DOM.remE(this.idAs),this.killTimeout(),0==t.length&&!this.oP.shownoresults)return!1;var i=_b.DOM.cE("span",{});i.style.position="relative";var s=_b.DOM.cE("div",{id:this.idAs,className:this.oP.className}),n=_b.DOM.cE("div",{className:"as_corner"}),o=_b.DOM.cE("div",{className:"as_bar"}),r=_b.DOM.cE("div",{className:"as_header"});r.appendChild(n),r.appendChild(o);for(var h=_b.DOM.cE("ul",{id:this.oP.listID,className:"search-ul"}),a=0;a<t.length;a++){var u=t[a].value,l=u.toLowerCase().indexOf(this.sInp.toLowerCase());if(l>=0)var d=u.substring(0,l)+"<em>"+u.substring(l,l+this.sInp.length)+"</em>"+u.substring(l+this.sInp.length);else var d=u;var c=d.replace(/-\|-/g,"<br>"),g=c.lastIndexOf("<br>");if(g>0&&c.length-g>5)var f=c.substring(0,g)+'<span style="display:inline;font-size:.7rem;">'+c.substring(g,c.length)+"</span>";else var f=c;var p=_b.DOM.cE("span",{},f,!0),v=_b.DOM.cE("div",{className:"results"});if(""!=t[a].info){var m=_b.DOM.cE("img",{});m.src="https:"!=window.location.protocol?"http://i.models.com/i/db/"+t[a].info:"https://models.com/i/db/"+t[a].info,m.border="1",m.align="left",v.appendChild(m),v.appendChild(p)}else v.className="results catDivider",v.appendChild(p);if(v.style.display="inline-block",v.style.visibility="visible",t[a].id.indexOf("/")>0)var y=_b.DOM.cE("a",{href:"http://models.com/"+t[a].id});else if(0==t[a].id.length)var y=_b.DOM.cE("span",{className:"catSpan"});else var y=_b.DOM.cE("a",{href:t[a].id});y.appendChild(v),y.name=a+1,y.onclick=function(){return e.setHighlightedValue(),!1},y.onmouseover=function(){e.setHighlight(this.name)};var b=_b.DOM.cE("li",{},y);b.style.listStyle="none",h.appendChild(b)}s.appendChild(h);var _=_b.DOM.cE("div",{className:"as_corner"}),D=_b.DOM.cE("div",{className:"as_bar"}),I=_b.DOM.cE("div",{className:"as_footer"});I.appendChild(_),I.appendChild(D);_b.DOM.getPos(this.fld);s.onmouseover=function(){e.killTimeout()},s.onmouseout=function(){e.resetTimeout()},document.getElementById(this.oP.spanID).appendChild(s),this.iHigh=0;var e=this;this.toID=setTimeout(function(){e.clearSuggestions()},this.oP.timeout)},_b.AutoSuggest.prototype.changeHighlight=function(t){var e=_b.DOM.gE(this.oP.listID);if(!e)return!1;var i;40==t?i=this.iHigh+1:38==t&&(i=this.iHigh-1),i>e.childNodes.length&&(i=1),1>i&&(i=e.childNodes.length),this.setHighlight(i),0==e.childNodes[i-1].getElementsByTagName("a").length&&this.changeHighlight(t)},_b.AutoSuggest.prototype.setHighlight=function(t){var e=_b.DOM.gE(this.oP.listID);if(!e)return!1;if(this.iHigh>0&&this.clearHighlight(),this.iHigh=Number(t),e.childNodes[this.iHigh-1].className="as_highlight","undefined"!=typeof document.defaultView&&"undefined"!=typeof document.defaultView.getComputedStyle(e,null).height){var i=parseInt(document.defaultView.getComputedStyle(e,null).height),s=e.scrollTop,n=e.childNodes[this.iHigh-1].offsetTop,o=e.childNodes[this.iHigh-1].offsetHeight;s>n?e.scrollTop=n:n+o>s+i&&(e.scrollTop=n+o-i,0>s&&(e.scrollTop=0));var s=e.scrollTop}this.killTimeout()},_b.AutoSuggest.prototype.clearHighlight=function(){var t=_b.DOM.gE(this.oP.listID);return t?void(this.iHigh>0&&(t.childNodes[this.iHigh-1].className="",this.iHigh=0)):!1},_b.AutoSuggest.prototype.setHighlightedValue=function(){this.iHigh&&(this.sInp=this.fld.value=this.aSug[this.iHigh-1].value,this.fld.focus(),this.fld.selectionStart&&this.fld.setSelectionRange(this.sInp.length,this.sInp.length),this.clearSuggestions(),"function"==typeof this.oP.callback&&this.oP.callback(this.aSug[this.iHigh-1]))},_b.AutoSuggest.prototype.killTimeout=function(){clearTimeout(this.toID)},_b.AutoSuggest.prototype.resetTimeout=function(){clearTimeout(this.toID);var t=this;this.toID=setTimeout(function(){t.clearSuggestions()},this.oP.timeout)},_b.AutoSuggest.prototype.clearSuggestions=function(){this.killTimeout();var t;for(t in divIDArray){var e=document.getElementById(divIDArray[t]);e&&"undefined"!=typeof e.appendChild&&_b.DOM.remE(e)}},"undefined"==typeof _b.Ajax&&(_b.Ajax={}),_b.Ajax=function(){this.req={},this.isIE=!1},_b.Ajax.prototype.makeRequest=function(t,e,i,s){"POST"!=e&&(e="GET"),this.onComplete=i,this.onError=s;var n=this;window.XMLHttpRequest?(this.req=new XMLHttpRequest,this.req.onreadystatechange=function(){n.processReqChange()},this.req.open("GET",t,!0),this.req.send(null)):window.ActiveXObject&&(this.req=new ActiveXObject("Microsoft.XMLHTTP"),this.req&&(this.req.onreadystatechange=function(){n.processReqChange()},this.req.open(e,t,!0),this.req.send()))},_b.Ajax.prototype.processReqChange=function(){4==this.req.readyState&&(200==this.req.status?this.onComplete(this.req):this.onError(this.req.status))},"undefined"==typeof _b.DOM&&(_b.DOM={}),_b.DOM.cE=function(t,e,i,s){var n=document.createElement(t);if(!n)return 0;for(var o in e)n[o]=e[o];var r=typeof i;return"string"!=r||s?"string"==r&&s?n.innerHTML=i:"object"==r&&n.appendChild(i):n.appendChild(document.createTextNode(i)),n},_b.DOM.gE=function(t){var e=typeof t;if("undefined"==e)return 0;if("string"==e){var i=document.getElementById(t);return i&&"undefined"!=typeof i.appendChild?i:0}return"undefined"!=typeof t.appendChild?t:0},_b.DOM.remE=function(t){var e=this.gE(t);return e&&e.parentNode.removeChild(e)?!0:0},_b.DOM.getPos=function(t){var t=this.gE(t),e=t,i=0;if(e.offsetParent)for(;e.offsetParent;)i+=e.offsetLeft,e=e.offsetParent;else e.x&&(i+=e.x);var e=t,s=0;if(e.offsetParent)for(;e.offsetParent;)s+=e.offsetTop,e=e.offsetParent;else e.y&&(s+=e.y);return{x:i,y:s}},"undefined"==typeof _b.Fader&&(_b.Fader={}),_b.Fader=function(t,e,i,s,n){if(!t)return 0;this.e=t,this.from=e,this.to=i,this.cb=n,this.nDur=s,this.nInt=50,this.nTime=0;var o=this;this.nID=setInterval(function(){o._fade()},this.nInt)},_b.Fader.prototype._fade=function(){this.nTime+=this.nInt;var t=Math.round(100*this._tween(this.nTime,this.from,this.to,this.nDur)),e=t/100;if(this.e.filters)try{this.e.filters.item("DXImageTransform.Microsoft.Alpha").opacity=t}catch(i){this.e.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+t+")"}else this.e.style.opacity=e;this.nTime==this.nDur&&(clearInterval(this.nID),void 0!=this.cb&&this.cb())},_b.Fader.prototype._tween=function(t,e,i,s){return e+(i-e)*(t/s)};